{"repository": {"owner": {"login": "spring-projects"}, "name": "spring-boot", "forkCount": 33116, "stargazerCount": 54020, "createdAt": "2012-10-19T15:02:57Z", "updatedAt": "2021-03-18T08:13:24Z", "repositoryTopics": {"edges": [{"node": {"topic": {"name": "java"}}}, {"node": {"topic": {"name": "spring-boot"}}}, {"node": {"topic": {"name": "spring"}}}, {"node": {"topic": {"name": "framework"}}}]}, "languages": {"edges": [{"node": {"name": "Java"}}, {"node": {"name": "Smarty"}}, {"node": {"name": "HTML"}}, {"node": {"name": "Groovy"}}, {"node": {"name": "Shell"}}, {"node": {"name": "Ruby"}}, {"node": {"name": "CSS"}}, {"node": {"name": "JavaScript"}}, {"node": {"name": "Batchfile"}}, {"node": {"name": "Kotlin"}}, {"node": {"name": "Dockerfile"}}, {"node": {"name": "Vim Snippet"}}, {"node": {"name": "Mustache"}}]}, "primaryLanguage": {"name": "Java"}}, "id": "MDU6SXNzdWU2MDE1NzU0NDY=", "number": 20995, "author": {"login": "philwebb"}, "title": "Investigate shutdown delay option", "body": "The [webinar](https://tanzu.vmware.com/content/webinars/apr-16-spring-on-kubernetes) presented by @ryanjbaxter has an interesting bit of configuration to delay shutdown using a `preStop` command. [This article](https://blog.gruntwork.io/delaying-shutdown-to-wait-for-pod-deletion-propagation-445f779a8304) has some interesting background.\r\n\r\nWe might be able to offer a similar feature out-of-the-box in Boot and configure it automatically.", "bodyHTML": "<p>The <a href=\"https://tanzu.vmware.com/content/webinars/apr-16-spring-on-kubernetes\" rel=\"nofollow\">webinar</a> presented by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/ryanjbaxter/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ryanjbaxter\">@ryanjbaxter</a> has an interesting bit of configuration to delay shutdown using a <code>preStop</code> command. <a href=\"https://blog.gruntwork.io/delaying-shutdown-to-wait-for-pod-deletion-propagation-445f779a8304\" rel=\"nofollow\">This article</a> has some interesting background.</p>\n<p>We might be able to offer a similar feature out-of-the-box in Boot and configure it automatically.</p>", "bodyText": "The webinar presented by @ryanjbaxter has an interesting bit of configuration to delay shutdown using a preStop command. This article has some interesting background.\nWe might be able to offer a similar feature out-of-the-box in Boot and configure it automatically.", "assignees": {"edges": []}, "createdAt": "2020-04-16T23:07:34Z", "closed": false, "closedAt": null, "lastEditedAt": null, "publishedAt": "2020-04-16T23:07:34Z", "comments": {"edges": [{"node": {"id": "MDEyOklzc3VlQ29tbWVudDYxNDk0NDk5Mg==", "author": {"login": "ryanjbaxter"}, "body": "@philwebb  actually pulled that from the boot docs \ud83e\udd2b", "bodyText": "@philwebb  actually pulled that from the boot docs \ud83e\udd2b", "bodyHTML": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/philwebb/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/philwebb\">@philwebb</a>  actually pulled that from the boot docs <g-emoji class=\"g-emoji\" alias=\"shushing_face\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f92b.png\">\ud83e\udd2b</g-emoji></p>", "createdAt": "2020-04-16T23:18:47Z", "publishedAt": "2020-04-16T23:18:47Z", "lastEditedAt": null, "updatedAt": "2020-04-16T23:18:47Z", "reactions": {"edges": []}, "bodyParsed": [{"number": 32908, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "@philwebb  actually pulled that from the boot docs \ud83e\udd2b", "sentSegmented": ["philwebb", "actually", "pulled", "that", "from", "the", "boot", "docs"], "sentSegmentedWithoutStops": ["philwebb", "actually", "pulled", "boot", "docs"], "sentSegmentedWithoutStopsStemmed": ["philwebb", "actual", "pull", "boot", "doc"]}]}}, {"node": {"id": "MDEyOklzc3VlQ29tbWVudDYxNDk1MDEwNw==", "author": {"login": "philwebb"}, "body": "I guess I missed those doc updates. They must have happened when I was away so I'm glad I watched the webinar!", "bodyText": "I guess I missed those doc updates. They must have happened when I was away so I'm glad I watched the webinar!", "bodyHTML": "<p>I guess I missed those doc updates. They must have happened when I was away so I'm glad I watched the webinar!</p>", "createdAt": "2020-04-16T23:36:56Z", "publishedAt": "2020-04-16T23:36:56Z", "lastEditedAt": null, "updatedAt": "2020-04-16T23:36:56Z", "reactions": {"edges": [{"node": {"content": "THUMBS_UP", "createdAt": "2020-04-17T00:11:24Z"}}]}, "bodyParsed": [{"number": 32909, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "I guess I missed those doc updates.", "sentSegmented": ["i", "guess", "i", "missed", "those", "doc", "updates"], "sentSegmentedWithoutStops": ["guess", "missed", "doc", "updates"], "sentSegmentedWithoutStopsStemmed": ["guess", "miss", "doc", "updat"]}, {"number": 32910, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "They must have happened when I was away so I'm glad I watched the webinar!", "sentSegmented": ["they", "must", "have", "happened", "when", "i", "was", "away", "so", "i", "'m", "glad", "i", "watched", "the", "webinar"], "sentSegmentedWithoutStops": ["must", "happened", "away", "'m", "glad", "watched", "webinar"], "sentSegmentedWithoutStopsStemmed": ["must", "happen", "away", "'m", "glad", "watch", "webinar"]}]}}, {"node": {"id": "MDEyOklzc3VlQ29tbWVudDY0NDg5MDA1NQ==", "author": {"login": "ckoutsouridis"}, "body": "i think this would be a great feature given that endpoints propagation and pod deletion happens asynchronously. + not all base images have a shell in order to run sleep in the `preStop`.\r\n\r\nthe 2.3 gracefull shutdown support is great, but i believe in k8s we will have to delay the shutdown still, in order to to make sure that new requests will not end up in an endpoint from a pod that is already gone.", "bodyText": "i think this would be a great feature given that endpoints propagation and pod deletion happens asynchronously. + not all base images have a shell in order to run sleep in the preStop.\nthe 2.3 gracefull shutdown support is great, but i believe in k8s we will have to delay the shutdown still, in order to to make sure that new requests will not end up in an endpoint from a pod that is already gone.", "bodyHTML": "<p>i think this would be a great feature given that endpoints propagation and pod deletion happens asynchronously. + not all base images have a shell in order to run sleep in the <code>preStop</code>.</p>\n<p>the 2.3 gracefull shutdown support is great, but i believe in k8s we will have to delay the shutdown still, in order to to make sure that new requests will not end up in an endpoint from a pod that is already gone.</p>", "createdAt": "2020-06-16T16:59:06Z", "publishedAt": "2020-06-16T16:59:06Z", "lastEditedAt": null, "updatedAt": "2020-06-16T16:59:06Z", "reactions": {"edges": []}, "bodyParsed": [{"number": 32911, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "i think this would be a great feature given that endpoints propagation and pod deletion happens asynchronously.", "sentSegmented": ["i", "think", "this", "would", "be", "a", "great", "feature", "given", "that", "endpoints", "propagation", "and", "pod", "deletion", "happens", "asynchronously"], "sentSegmentedWithoutStops": ["think", "would", "great", "feature", "given", "endpoints", "propagation", "pod", "deletion", "happens", "asynchronously"], "sentSegmentedWithoutStopsStemmed": ["think", "would", "great", "featur", "given", "endpoint", "propag", "pod", "delet", "happen", "asynchron"]}, {"number": 32912, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "+ not all base images have a shell in order to run sleep in the preStop.", "sentSegmented": ["not", "all", "base", "images", "have", "a", "shell", "in", "order", "to", "run", "sleep", "in", "the", "prestop"], "sentSegmentedWithoutStops": ["base", "images", "shell", "order", "run", "sleep", "prestop"], "sentSegmentedWithoutStopsStemmed": ["base", "imag", "shell", "order", "run", "sleep", "prestop"]}, {"number": 32913, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "the 2.3 gracefull shutdown support is great, but i believe in k8s we will have to delay the shutdown still, in order to to make sure that new requests will not end up in an endpoint from a pod that is already gone.", "sentSegmented": ["the", "2.3", "gracefull", "shutdown", "support", "is", "great", "but", "i", "believe", "in", "k8s", "we", "will", "have", "to", "delay", "the", "shutdown", "still", "in", "order", "to", "to", "make", "sure", "that", "new", "requests", "will", "not", "end", "up", "in", "an", "endpoint", "from", "a", "pod", "that", "is", "already", "gone"], "sentSegmentedWithoutStops": ["2.3", "gracefull", "shutdown", "support", "great", "believe", "k8s", "delay", "shutdown", "still", "order", "make", "sure", "new", "requests", "end", "endpoint", "pod", "already", "gone"], "sentSegmentedWithoutStopsStemmed": ["2.3", "graceful", "shutdown", "support", "great", "believ", "k8", "delay", "shutdown", "still", "order", "make", "sure", "new", "request", "end", "endpoint", "pod", "alreadi", "gone"]}]}}, {"node": {"id": "MDEyOklzc3VlQ29tbWVudDY4NzU0MzI3NQ==", "author": {"login": "ttddyy"}, "body": "We have an [operational scenario](https://github.com/spring-projects/spring-boot/issues/19593#issuecomment-601799642) that directly open a shell on the pod and restart the application. This allows faster restart of the app since it doesn't involve k8s pod lifecycle.\r\n\r\nIn such case, k8s does not know the application is restarting and it still send traffic to the pod during shutdown.\r\nSo, in our graceful shutdown logic(in addition to the one from boot 2.3), we put a sleep for the duration of readiness check frequency, to make sure k8s readiness check picks up that the app is about to restarting and stop routing the traffic before actual shutdown happens.\r\n\r\nIf Spring Boot provides sleep(delay) on its graceful shutdown logic, I can remove our sleep logic from our library, which is great.\r\n", "bodyText": "We have an operational scenario that directly open a shell on the pod and restart the application. This allows faster restart of the app since it doesn't involve k8s pod lifecycle.\nIn such case, k8s does not know the application is restarting and it still send traffic to the pod during shutdown.\nSo, in our graceful shutdown logic(in addition to the one from boot 2.3), we put a sleep for the duration of readiness check frequency, to make sure k8s readiness check picks up that the app is about to restarting and stop routing the traffic before actual shutdown happens.\nIf Spring Boot provides sleep(delay) on its graceful shutdown logic, I can remove our sleep logic from our library, which is great.", "bodyHTML": "<p>We have an <a href=\"https://github.com/spring-projects/spring-boot/issues/19593#issuecomment-601799642\" data-hovercard-type=\"issue\" data-hovercard-url=\"/spring-projects/spring-boot/issues/19593/hovercard\">operational scenario</a> that directly open a shell on the pod and restart the application. This allows faster restart of the app since it doesn't involve k8s pod lifecycle.</p>\n<p>In such case, k8s does not know the application is restarting and it still send traffic to the pod during shutdown.<br>\nSo, in our graceful shutdown logic(in addition to the one from boot 2.3), we put a sleep for the duration of readiness check frequency, to make sure k8s readiness check picks up that the app is about to restarting and stop routing the traffic before actual shutdown happens.</p>\n<p>If Spring Boot provides sleep(delay) on its graceful shutdown logic, I can remove our sleep logic from our library, which is great.</p>", "createdAt": "2020-09-05T03:55:34Z", "publishedAt": "2020-09-05T03:55:34Z", "lastEditedAt": null, "updatedAt": "2020-09-05T03:55:34Z", "reactions": {"edges": []}, "bodyParsed": [{"number": 32914, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "We have an operational scenario that directly open a shell on the pod and restart the application.", "sentSegmented": ["we", "have", "an", "operational", "scenario", "that", "directly", "open", "a", "shell", "on", "the", "pod", "and", "restart", "the", "application"], "sentSegmentedWithoutStops": ["operational", "scenario", "directly", "open", "shell", "pod", "restart", "application"], "sentSegmentedWithoutStopsStemmed": ["oper", "scenario", "directli", "open", "shell", "pod", "restart", "applic"]}, {"number": 32915, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "This allows faster restart of the app since it doesn't involve k8s pod lifecycle.", "sentSegmented": ["this", "allows", "faster", "restart", "of", "the", "app", "since", "it", "does", "n't", "involve", "k8s", "pod", "lifecycle"], "sentSegmentedWithoutStops": ["allows", "faster", "restart", "app", "since", "n't", "involve", "k8s", "pod", "lifecycle"], "sentSegmentedWithoutStopsStemmed": ["allow", "faster", "restart", "app", "sinc", "n't", "involv", "k8", "pod", "lifecycl"]}, {"number": 32916, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "In such case, k8s does not know the application is restarting and it still send traffic to the pod during shutdown.", "sentSegmented": ["in", "such", "case", "k8s", "does", "not", "know", "the", "application", "is", "restarting", "and", "it", "still", "send", "traffic", "to", "the", "pod", "during", "shutdown"], "sentSegmentedWithoutStops": ["case", "k8s", "know", "application", "restarting", "still", "send", "traffic", "pod", "shutdown"], "sentSegmentedWithoutStopsStemmed": ["case", "k8", "know", "applic", "restart", "still", "send", "traffic", "pod", "shutdown"]}, {"number": 32917, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "So, in our graceful shutdown logic(in addition to the one from boot 2.3), we put a sleep for the duration of readiness check frequency, to make sure k8s readiness check picks up that the app is about to restarting and stop routing the traffic before actual shutdown happens.", "sentSegmented": ["so", "in", "our", "graceful", "shutdown", "logic", "in", "addition", "to", "the", "one", "from", "boot", "2.3", "we", "put", "a", "sleep", "for", "the", "duration", "of", "readiness", "check", "frequency", "to", "make", "sure", "k8s", "readiness", "check", "picks", "up", "that", "the", "app", "is", "about", "to", "restarting", "and", "stop", "routing", "the", "traffic", "before", "actual", "shutdown", "happens"], "sentSegmentedWithoutStops": ["graceful", "shutdown", "logic", "addition", "one", "boot", "2.3", "put", "sleep", "duration", "readiness", "check", "frequency", "make", "sure", "k8s", "readiness", "check", "picks", "app", "restarting", "stop", "routing", "traffic", "actual", "shutdown", "happens"], "sentSegmentedWithoutStopsStemmed": ["grace", "shutdown", "logic", "addit", "one", "boot", "2.3", "put", "sleep", "durat", "readi", "check", "frequenc", "make", "sure", "k8", "readi", "check", "pick", "app", "restart", "stop", "rout", "traffic", "actual", "shutdown", "happen"]}, {"number": 32918, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "If Spring Boot provides sleep(delay) on its graceful shutdown logic, I can remove our sleep logic from our library, which is great.", "sentSegmented": ["if", "spring", "boot", "provides", "sleep", "delay", "on", "its", "graceful", "shutdown", "logic", "i", "can", "remove", "our", "sleep", "logic", "from", "our", "library", "which", "is", "great"], "sentSegmentedWithoutStops": ["spring", "boot", "provides", "sleep", "delay", "graceful", "shutdown", "logic", "remove", "sleep", "logic", "library", "great"], "sentSegmentedWithoutStopsStemmed": ["spring", "boot", "provid", "sleep", "delay", "grace", "shutdown", "logic", "remov", "sleep", "logic", "librari", "great"]}]}}, {"node": {"id": "MDEyOklzc3VlQ29tbWVudDc0MTY4MDQwNA==", "author": {"login": "siwyd"}, "body": "This would be a handy addition, as right now I always lose some metrics when the application shuts down because Prometheus hasn't had a chance to scrape the last 'meaningful' metrics before it's killed, causing a big (fake) dip in request rate for instance. If I could keep the application around for 30s while traffic is already being diverted to other instances, this would allow me to scrape those last metrics.", "bodyText": "This would be a handy addition, as right now I always lose some metrics when the application shuts down because Prometheus hasn't had a chance to scrape the last 'meaningful' metrics before it's killed, causing a big (fake) dip in request rate for instance. If I could keep the application around for 30s while traffic is already being diverted to other instances, this would allow me to scrape those last metrics.", "bodyHTML": "<p>This would be a handy addition, as right now I always lose some metrics when the application shuts down because Prometheus hasn't had a chance to scrape the last 'meaningful' metrics before it's killed, causing a big (fake) dip in request rate for instance. If I could keep the application around for 30s while traffic is already being diverted to other instances, this would allow me to scrape those last metrics.</p>", "createdAt": "2020-12-09T10:26:51Z", "publishedAt": "2020-12-09T10:26:51Z", "lastEditedAt": null, "updatedAt": "2020-12-09T10:26:51Z", "reactions": {"edges": []}, "bodyParsed": [{"number": 32919, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "This would be a handy addition, as right now I always lose some metrics when the application shuts down because Prometheus hasn't had a chance to scrape the last 'meaningful' metrics before it's killed, causing a big (fake) dip in request rate for instance.", "sentSegmented": ["this", "would", "be", "a", "handy", "addition", "as", "right", "now", "i", "always", "lose", "some", "metrics", "when", "the", "application", "shuts", "down", "because", "prometheus", "has", "n't", "had", "a", "chance", "to", "scrape", "the", "last", "'meaningful", "metrics", "before", "it", "'s", "killed", "causing", "a", "big", "fake", "dip", "in", "request", "rate", "for", "instance"], "sentSegmentedWithoutStops": ["would", "handy", "addition", "right", "always", "lose", "metrics", "application", "shuts", "prometheus", "n't", "chance", "scrape", "last", "'meaningful", "metrics", "'s", "killed", "causing", "big", "fake", "dip", "request", "rate", "instance"], "sentSegmentedWithoutStopsStemmed": ["would", "handi", "addit", "right", "alway", "lose", "metric", "applic", "shut", "prometheu", "n't", "chanc", "scrape", "last", "'meaning", "metric", "'s", "kill", "caus", "big", "fake", "dip", "request", "rate", "instanc"]}, {"number": 32920, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "If I could keep the application around for 30s while traffic is already being diverted to other instances, this would allow me to scrape those last metrics.", "sentSegmented": ["if", "i", "could", "keep", "the", "application", "around", "for", "30s", "while", "traffic", "is", "already", "being", "diverted", "to", "other", "instances", "this", "would", "allow", "me", "to", "scrape", "those", "last", "metrics"], "sentSegmentedWithoutStops": ["could", "keep", "application", "around", "30s", "traffic", "already", "diverted", "instances", "would", "allow", "scrape", "last", "metrics"], "sentSegmentedWithoutStopsStemmed": ["could", "keep", "applic", "around", "30", "traffic", "alreadi", "divert", "instanc", "would", "allow", "scrape", "last", "metric"]}]}}, {"node": {"id": "MDEyOklzc3VlQ29tbWVudDc0NDM5MzA1Mw==", "author": {"login": "dimovelev"}, "body": "Waiting between tripping the readiness probe to REFUSING_TRAFFIC and actually starting to refuse traffic would also be good for non-kubernetes environments with standard load-balancers that have checks (monitors) to determine whether an instance should be kept in the pool or not. Right now, even with graceful shutdown activated, the load balancer is going to send a few (or many, depending on the number of requests) to endpoints that are already shutting down thus making it impossible to deploy without downtime.", "bodyText": "Waiting between tripping the readiness probe to REFUSING_TRAFFIC and actually starting to refuse traffic would also be good for non-kubernetes environments with standard load-balancers that have checks (monitors) to determine whether an instance should be kept in the pool or not. Right now, even with graceful shutdown activated, the load balancer is going to send a few (or many, depending on the number of requests) to endpoints that are already shutting down thus making it impossible to deploy without downtime.", "bodyHTML": "<p>Waiting between tripping the readiness probe to REFUSING_TRAFFIC and actually starting to refuse traffic would also be good for non-kubernetes environments with standard load-balancers that have checks (monitors) to determine whether an instance should be kept in the pool or not. Right now, even with graceful shutdown activated, the load balancer is going to send a few (or many, depending on the number of requests) to endpoints that are already shutting down thus making it impossible to deploy without downtime.</p>", "createdAt": "2020-12-14T11:58:28Z", "publishedAt": "2020-12-14T11:58:28Z", "lastEditedAt": null, "updatedAt": "2020-12-14T11:58:28Z", "reactions": {"edges": []}, "bodyParsed": [{"number": 32921, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "Waiting between tripping the readiness probe to REFUSING_TRAFFIC and actually starting to refuse traffic would also be good for non-kubernetes environments with standard load-balancers that have checks (monitors) to determine whether an instance should be kept in the pool or not.", "sentSegmented": ["waiting", "between", "tripping", "the", "readiness", "probe", "to", "refusing_traffic", "and", "actually", "starting", "to", "refuse", "traffic", "would", "also", "be", "good", "for", "non-kubernetes", "environments", "with", "standard", "load-balancers", "that", "have", "checks", "monitors", "to", "determine", "whether", "an", "instance", "should", "be", "kept", "in", "the", "pool", "or", "not"], "sentSegmentedWithoutStops": ["waiting", "tripping", "readiness", "probe", "refusing_traffic", "actually", "starting", "refuse", "traffic", "would", "also", "good", "non-kubernetes", "environments", "standard", "load-balancers", "checks", "monitors", "determine", "whether", "instance", "kept", "pool"], "sentSegmentedWithoutStopsStemmed": ["wait", "trip", "readi", "probe", "refusing_traff", "actual", "start", "refus", "traffic", "would", "also", "good", "non-kubernet", "environ", "standard", "load-balanc", "check", "monitor", "determin", "whether", "instanc", "kept", "pool"]}, {"number": 32922, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "Right now, even with graceful shutdown activated, the load balancer is going to send a few (or many, depending on the number of requests) to endpoints that are already shutting down thus making it impossible to deploy without downtime.", "sentSegmented": ["right", "now", "even", "with", "graceful", "shutdown", "activated", "the", "load", "balancer", "is", "going", "to", "send", "a", "few", "or", "many", "depending", "on", "the", "number", "of", "requests", "to", "endpoints", "that", "are", "already", "shutting", "down", "thus", "making", "it", "impossible", "to", "deploy", "without", "downtime"], "sentSegmentedWithoutStops": ["right", "even", "graceful", "shutdown", "activated", "load", "balancer", "going", "send", "many", "depending", "number", "requests", "endpoints", "already", "shutting", "thus", "making", "impossible", "deploy", "without", "downtime"], "sentSegmentedWithoutStopsStemmed": ["right", "even", "grace", "shutdown", "activ", "load", "balanc", "go", "send", "mani", "depend", "number", "request", "endpoint", "alreadi", "shut", "thu", "make", "imposs", "deploy", "without", "downtim"]}]}}, {"node": {"id": "MDEyOklzc3VlQ29tbWVudDc0NDQwOTQzMg==", "author": {"login": "wilkinsona"}, "body": "@dimovelev Outside of a K8S environment, the expectation is that the load balancer is instructed to stop routing requests to the app first and that graceful shutdown of the application instance is then initiated. This should allow existing in-flights requests to complete while any new requests are routed to a different instance.", "bodyText": "@dimovelev Outside of a K8S environment, the expectation is that the load balancer is instructed to stop routing requests to the app first and that graceful shutdown of the application instance is then initiated. This should allow existing in-flights requests to complete while any new requests are routed to a different instance.", "bodyHTML": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/dimovelev/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dimovelev\">@dimovelev</a> Outside of a K8S environment, the expectation is that the load balancer is instructed to stop routing requests to the app first and that graceful shutdown of the application instance is then initiated. This should allow existing in-flights requests to complete while any new requests are routed to a different instance.</p>", "createdAt": "2020-12-14T12:33:40Z", "publishedAt": "2020-12-14T12:33:40Z", "lastEditedAt": null, "updatedAt": "2020-12-14T12:33:40Z", "reactions": {"edges": []}, "bodyParsed": [{"number": 32923, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "@dimovelev Outside of a K8S environment, the expectation is that the load balancer is instructed to stop routing requests to the app first and that graceful shutdown of the application instance is then initiated.", "sentSegmented": ["dimovelev", "outside", "of", "a", "k8s", "environment", "the", "expectation", "is", "that", "the", "load", "balancer", "is", "instructed", "to", "stop", "routing", "requests", "to", "the", "app", "first", "and", "that", "graceful", "shutdown", "of", "the", "application", "instance", "is", "then", "initiated"], "sentSegmentedWithoutStops": ["dimovelev", "outside", "k8s", "environment", "expectation", "load", "balancer", "instructed", "stop", "routing", "requests", "app", "first", "graceful", "shutdown", "application", "instance", "initiated"], "sentSegmentedWithoutStopsStemmed": ["dimovelev", "outsid", "k8", "environ", "expect", "load", "balanc", "instruct", "stop", "rout", "request", "app", "first", "grace", "shutdown", "applic", "instanc", "initi"]}, {"number": 32924, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "This should allow existing in-flights requests to complete while any new requests are routed to a different instance.", "sentSegmented": ["this", "should", "allow", "existing", "in-flights", "requests", "to", "complete", "while", "any", "new", "requests", "are", "routed", "to", "a", "different", "instance"], "sentSegmentedWithoutStops": ["allow", "existing", "in-flights", "requests", "complete", "new", "requests", "routed", "different", "instance"], "sentSegmentedWithoutStopsStemmed": ["allow", "exist", "in-flight", "request", "complet", "new", "request", "rout", "differ", "instanc"]}]}}], "pageInfo": {"endCursor": "Y3Vyc29yOnYyOpHOLF7JWA==", "hasNextPage": false}, "totalCount": 7}, "labels": {"edges": [{"node": {"createdAt": "2018-11-02T16:32:46Z", "name": "status: pending-design-work"}}, {"node": {"createdAt": "2020-01-13T21:00:54Z", "name": "theme: kubernetes"}}, {"node": {"createdAt": "2012-10-19T15:02:58Z", "name": "type: enhancement"}}]}, "milestone": {"title": "2.x", "dueOn": null}, "reactions": {"edges": [{"node": {"content": "THUMBS_UP", "createdAt": "2020-06-16T16:59:12Z"}}, {"node": {"content": "THUMBS_UP", "createdAt": "2020-07-13T16:33:39Z"}}, {"node": {"content": "THUMBS_UP", "createdAt": "2020-11-06T07:17:15Z"}}, {"node": {"content": "THUMBS_UP", "createdAt": "2020-12-09T10:21:56Z"}}]}, "state": "OPEN", "titleSegmented": ["investigate", "shutdown", "delay", "option"], "titleSegmentedWithoutStops": ["investigate", "shutdown", "delay", "option"], "titleSegmentedWithoutStopsStemmed": ["investig", "shutdown", "delay", "option"], "bodyParsed": [{"number": 32905, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "The webinar presented by @ryanjbaxter has an interesting bit of configuration to delay shutdown using a preStop command.", "sentSegmented": ["the", "webinar", "presented", "by", "ryanjbaxter", "has", "an", "interesting", "bit", "of", "configuration", "to", "delay", "shutdown", "using", "a", "prestop", "command"], "sentSegmentedWithoutStops": ["webinar", "presented", "ryanjbaxter", "interesting", "bit", "configuration", "delay", "shutdown", "using", "prestop", "command"], "sentSegmentedWithoutStopsStemmed": ["webinar", "present", "ryanjbaxt", "interest", "bit", "configur", "delay", "shutdown", "use", "prestop", "command"]}, {"number": 32906, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "This article has some interesting background.", "sentSegmented": ["this", "article", "has", "some", "interesting", "background"], "sentSegmentedWithoutStops": ["article", "interesting", "background"], "sentSegmentedWithoutStopsStemmed": ["articl", "interest", "background"]}, {"number": 32907, "isCode": false, "isBlockQuote": false, "blockQuoteDepth": 0, "sent": "We might be able to offer a similar feature out-of-the-box in Boot and configure it automatically.", "sentSegmented": ["we", "might", "be", "able", "to", "offer", "a", "similar", "feature", "out-of-the-box", "in", "boot", "and", "configure", "it", "automatically"], "sentSegmentedWithoutStops": ["might", "able", "offer", "similar", "feature", "out-of-the-box", "boot", "configure", "automatically"], "sentSegmentedWithoutStopsStemmed": ["might", "abl", "offer", "similar", "featur", "out-of-the-box", "boot", "configur", "automat"]}]}